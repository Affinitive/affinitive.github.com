--- 
title: Retrieving Domain Insights from the Facebook Graph API
layout: post
published: true
---
<p>Facebook&nbsp;<a href="https://developers.facebook.com/blog/post/501" target="_blank">recently announced</a>&nbsp;it is possible to retrieve statistics on the new&nbsp;<a href="https://developers.facebook.com/docs/reference/plugins/send/" target="_blank">Send Button</a>&nbsp;via the Graph API. &nbsp;The statistics currently available are only for the domain as a whole - not a particular page. &nbsp;These include domain_widget_send_views, domain_widget_send_clicks, domain_widget_send_inbox_views, and domain_widget_send_inbox_clicks. &nbsp;However, if you list the statistics available for your app (<a href="https://developers.facebook.com/tools/explorer?method=GET&amp;path=APP_ID%2Finsights" target="_blank">https://graph.facebook.com/APP_ID/insights?access_token=xxxxxxx</a>), you won't see domain_* statistics listed.</p>
<p />
<div>Your domain has a different object_id in the Graph API than your app. &nbsp;In order to get the object_id for your domain, you can use the domain FQL table:&nbsp;<a href="https://developers.facebook.com/docs/reference/fql/domain/">https://developers.facebook.com/docs/reference/fql/domain/</a>&nbsp;&nbsp;You can also use a little trick if you have already claimed the domain at <a href="https://facebook.com/insights" target="_blank">https://facebook.com/insights</a>. &nbsp;You can claim domains that have fb:app_id open graph tags at the root of the domain (i.e. <a href="http://www.your-domain.com/" target="_blank">http://www.your-domain.com/</a>) where you have been given at least Insights access for the app.</div>
<p />
<div>If you see a claimed domain listed in the websites section of <a href="https://facebook.com/insights" target="_blank">https://facebook.com/insights</a>, the "View Insights" link will take you to a url like this:&nbsp;<a href="https://www.facebook.com/insights/?sk=wo_###########" target="_blank">https://www.facebook.com/insights/?sk=wo_###########</a> &nbsp;That number after&nbsp;<a href="https://www.facebook.com/insights/?sk=wo_">https://www.facebook.com/insights/?sk=wo_</a> is the object_id of your domain. &nbsp;You can confirm that via this url: <a href="https://graph.facebook.com/DOMAIN_OBJECT_ID?metadata=1" target="_blank">https://graph.facebook.com/DOMAIN_OBJECT_ID?metadata=1</a></div>
<p />
<div>Once you have the domain object id, you can now get the domain insights including the new Send Button data via&nbsp;<a href="https://developers.facebook.com/tools/explorer?method=GET&amp;path=DOMAIN_OBJECT_ID%2Finsights" target="_blank">https://graph.facebook.com/DOMAIN_OBJECT_ID/insights?access_token=xxxxxxx</a>.  If you need to obtain an access token, the <a href="https://developers.facebook.com/tools/explorer">Graph API Explorer</a> tool makes it easy.  Click on "Get Access Token" and then check off "read_insights" from the Extended Permissions tab.</div>
